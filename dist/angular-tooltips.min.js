/*
 * angular-tooltips
 * 1.2.1
 * 
 * Angular.js tooltips module.
 * http://720kb.github.io/angular-tooltips
 * 
 * MIT license
 * Tue May 23 2017
 */
!function(t,o){"use strict";var e="tooltips",i=function(){var t,e=[],i=0,r=function(t){t-i>=15?(e.forEach(function(t){t()}),i=t):o.console.log("Skipped!")},l=function(){o.clearTimeout(t),t=o.setTimeout(function(){o.requestAnimationFrame(r)},500)},n=function(t){t&&e.push(t)};return{add:function(t){e.length||o.addEventListener("resize",l),n(t)},remove:function(){e.length||(o.clearTimeout(t),o.removeEventListener("resize",l))}}}(),r=function(t){var o={};return t.removeAttr(e),void 0!==t.attr("tooltip-template")&&(o["tooltip-template"]=t.attr("tooltip-template"),t.removeAttr("tooltip-template")),void 0!==t.attr("tooltip-template-url")&&(o["tooltip-template-url"]=t.attr("tooltip-template-url"),t.removeAttr("tooltip-template-url")),void 0!==t.attr("tooltip-template-url-cache")&&(o["tooltip-template-url-cache"]=t.attr("tooltip-template-url-cache"),t.removeAttr("tooltip-template-url-cache")),void 0!==t.attr("tooltip-controller")&&(o["tooltip-controller"]=t.attr("tooltip-controller"),t.removeAttr("tooltip-controller")),void 0!==t.attr("tooltip-side")&&(o["tooltip-side"]=t.attr("tooltip-side"),t.removeAttr("tooltip-side")),void 0!==t.attr("tooltip-show-trigger")&&(o["tooltip-show-trigger"]=t.attr("tooltip-show-trigger"),t.removeAttr("tooltip-show-trigger")),void 0!==t.attr("tooltip-hide-trigger")&&(o["tooltip-hide-trigger"]=t.attr("tooltip-hide-trigger"),t.removeAttr("tooltip-hide-trigger")),void 0!==t.attr("tooltip-smart")&&(o["tooltip-smart"]=t.attr("tooltip-smart"),t.removeAttr("tooltip-smart")),void 0!==t.attr("tooltip-class")&&(o["tooltip-class"]=t.attr("tooltip-class"),t.removeAttr("tooltip-class")),void 0!==t.attr("tooltip-show")&&(o["tooltip-show"]=t.attr("tooltip-show"),t.removeAttr("tooltip-show")),void 0!==t.attr("tooltip-close-button")&&(o["tooltip-close-button"]=t.attr("tooltip-close-button"),t.removeAttr("tooltip-close-button")),void 0!==t.attr("tooltip-size")&&(o["tooltip-size"]=t.attr("tooltip-size"),t.removeAttr("tooltip-size")),void 0!==t.attr("tooltip-speed")&&(o["tooltip-speed"]=t.attr("tooltip-speed"),t.removeAttr("tooltip-speed")),o},l=function(t){return o.getComputedStyle?o.getComputedStyle(t,""):t.currentStyle?t.currentStyle:void 0},n=function(e){for(var i,r,l=o.document.querySelectorAll("._exradicated-tooltip"),n=0,p=l.length;n<p;n+=1)if(i=l.item(n),i&&(r=t.element(i),r.data("_tooltip-parent")&&r.data("_tooltip-parent")===e))return r},p=function(t){var o=n(t);o&&o.remove()},a=function(t){if(t){var e=t[0].getBoundingClientRect();return(e.top<0||e.top>o.document.body.offsetHeight||e.left<0||e.left>o.document.body.offsetWidth||e.bottom<0||e.bottom>o.document.body.offsetHeight||e.right<0||e.right>o.document.body.offsetWidth)&&(t.css({top:"",left:"",bottom:"",right:""}),!0)}throw new Error("You must provide a position")},s=function(t){return t.split(" ").map(function(t){return"_"+t}).join(" ")},d=["_top","_top _left","_left","_bottom _left","_bottom","_bottom _right","_right","_top _right"],c=function(t,o,e){for(var i=d.indexOf(s(e)),r=d.length,l=0;l<r&&a(t);l+=1)i+=1,i>=d.length&&(i=0),o.removeClass("_top _left _bottom _right"),o.addClass(d[i])},u=function(){var t={side:"top",showTrigger:"mouseenter",hideTrigger:"mouseleave","class":"",smart:!1,closeButton:!1,size:"",speed:"steady",tooltipTemplateUrlCache:!1,show:null};return{configure:function(o){var e,i=Object.keys(t),r=0;if(o)for(;r<i.length;r+=1)e=i[r],e&&o[e]&&(t[e]=o[e])},$get:function(){return t}}},m=["$log","$http","$compile","$timeout","$controller","$injector","tooltipsConf","$templateCache",function(e,a,d,u,m,f,g,h){var v=function(f,v,C,b,y){if(C.tooltipTemplate&&C.tooltipTemplateUrl)throw new Error("You can not define tooltip-template and tooltip-template-url together");if(!C.tooltipTemplateUrl&&!C.tooltipTemplate&&C.tooltipController)throw new Error("You can not have a controller without a template or templateUrl defined");var w,_=s(g.side),T=g.showTrigger,S=g.hideTrigger,$=g.size,A="_"+g.speed;C.tooltipSide=C.tooltipSide||g.side,C.tooltipShowTrigger=C.tooltipShowTrigger||g.showTrigger,C.tooltipHideTrigger=C.tooltipHideTrigger||g.hideTrigger,C.tooltipShow=C.tooltipShow||g.show,C.tooltipClass=C.tooltipClass||g["class"],C.tooltipSmart="true"===C.tooltipSmart||g.smart,C.tooltipCloseButton=C.tooltipCloseButton||g.closeButton.toString(),C.tooltipSize=C.tooltipSize||g.size,C.tooltipSpeed=C.tooltipSpeed||g.speed,C.tooltipAppendToBody="true"===C.tooltipAppendToBody,y(f,function(f,g){var b=r(f),y=t.element(o.document.createElement("tooltip")),B=t.element(o.document.createElement("tip-cont")),z=t.element(o.document.createElement("tip")),E=t.element(o.document.createElement("tip-tip")),P=t.element(o.document.createElement("span")),x=t.element(o.document.createElement("tip-arrow")),H=function(){return B.html()},V=function(t){void 0!==t&&B[0].getClientRects().length>1?y.addClass("_multiline"):y.removeClass("_multiline")},U=function(e){if(e&&!y.hasClass("active")&&e.stopImmediatePropagation(),z.addClass("_hidden"),C.tooltipSmart)switch(C.tooltipSide){case"top":case"left":case"bottom":case"right":case"top left":case"top right":case"bottom left":case"bottom right":c(z,y,C.tooltipSide);break;default:throw new Error("Position not supported")}if(C.tooltipAppendToBody){var i,r,n,a,s,d=l(E[0]),u=l(x[0]),m=l(z[0]),f=z[0].getBoundingClientRect(),g=t.copy(z),h=0,v=d.length,b=0,w=u.length,_=0,T=m.length,S={},$={},A={};for(z.removeClass("_hidden"),g.removeClass("_hidden"),g.data("_tooltip-parent",y),p(y);h<v;h+=1)i=d[h],i&&d.getPropertyValue(i)&&(S[i]=d.getPropertyValue(i));for(;b<w;b+=1)i=u[b],i&&u.getPropertyValue(i)&&(A[i]=u.getPropertyValue(i));for(;_<T;_+=1)i=m[_],i&&"position"!==i&&"display"!==i&&"opacity"!==i&&"z-index"!==i&&"bottom"!==i&&"height"!==i&&"left"!==i&&"right"!==i&&"top"!==i&&"width"!==i&&m.getPropertyValue(i)&&($[i]=m.getPropertyValue(i));r=o.parseInt(m.getPropertyValue("padding-top"),10),n=o.parseInt(m.getPropertyValue("padding-bottom"),10),a=o.parseInt(m.getPropertyValue("padding-left"),10),s=o.parseInt(m.getPropertyValue("padding-right"),10),$.top=f.top+o.pageYOffset+"px",$.left=f.left+o.pageXOffset+"px",$.height=f.height-(r+n)+"px",$.width=f.width-(a+s)+"px",g.css($),g.children().css(S),g.children().next().css(A),e&&"true"!==C.tooltipHidden&&(g.addClass("_exradicated-tooltip"),t.element(o.document.body).append(g))}else z.removeClass("_hidden"),e&&"true"!==C.tooltipHidden&&y.addClass("active")},k=function(t){t&&y.hasClass("active")&&t.stopImmediatePropagation(),C.tooltipAppendToBody?p(y):y.removeClass("active")},I=function mt(t){var o,e=t.parent();t[0]&&(t[0].scrollHeight>t[0].clientHeight||t[0].scrollWidth>t[0].clientWidth)&&t.on("scroll",function(){var t=this;o&&u.cancel(o),o=u(function(){var o=n(y),e=y[0].getBoundingClientRect(),i=t.getBoundingClientRect();e.top<i.top||e.bottom>i.bottom||e.left<i.left||e.right>i.right?p(y):o&&U(!0)})}),e&&e.length&&mt(e)},O=function(t){y.removeClass("_force-hidden"),E.empty(),E.append(P),E.append(t),u(function(){U()})},R=function(){E.empty(),y.addClass("_force-hidden")},W=function(t){var o=h.get(t);return"undefined"==typeof o&&(o=a.get(t).then(function(t){return t.data}),h.put(t,o)),o},Y=function(t){t?O(t):R()},j=function(t){t&&!C.tooltipTemplateUrlCache?W(t).then(function(t){O(d(t)(g))})["catch"](function(t){e.error(t)}):R()},q=function(t){t&&C.tooltipTemplateUrl?W(C.tooltipTemplateUrl).then(function(t){O(d(t)(g))})["catch"](function(t){e.error(t)}):R()},L=function(t){t&&(_&&y.removeClass(_),y.addClass(s(t)),_=t)},F=function(t){t&&(T&&y.off(T),y.on(t,U),T=t)},X=function(t){t&&(S&&y.off(S),y.on(t,k),S=t)},D=function(t){"true"===t?y.addClass("active"):y.removeClass("active")},G=function(t){t&&(w&&z.removeClass(w),z.addClass(t),w=t)},J=function(){"boolean"!=typeof C.tooltipSmart&&(C.tooltipSmart="true"===C.tooltipSmart)},K=function(t){var o="true"===t;o?(P.on("click",k),P.css("display","block")):(P.off("click"),P.css("display","none"))},M=function(o){if(o){var e,i=m(o,{$scope:g}),r=g.$new(!1,g),l=o.indexOf("as");l>=0?(e=o.substr(l+3),r[e]=i):t.extend(r,i),E.replaceWith(d(E)(r)),st()}},N=function(t){t&&($&&E.removeClass("_"+$),E.addClass("_"+t),$=t)},Q=function(t){t&&(A&&y.removeClass("_"+A),y.addClass("_"+t),A=t)},Z=C.$observe("tooltipTemplate",Y),tt=C.$observe("tooltipTemplateUrl",j),ot=C.$observe("tooltipTemplateUrlCache",q),et=C.$observe("tooltipSide",L),it=C.$observe("tooltipShowTrigger",F),rt=C.$observe("tooltipHideTrigger",X),lt=C.$observe("tooltipShow",D),nt=C.$observe("tooltipClass",G),pt=C.$observe("tooltipSmart",J),at=C.$observe("tooltipCloseButton",K),st=C.$observe("tooltipController",M),dt=C.$observe("tooltipSize",N),ct=C.$observe("tooltipSpeed",Q),ut=g.$watch(H,V);P.addClass("close-button"),P.html("&times;"),z.addClass("_hidden"),E.append(P),E.append(C.tooltipTemplate),z.append(E),z.append(x),B.append(f),y.attr(b),y.addClass("tooltips"),y.append(B),y.append(z),v.after(y),C.tooltipAppendToBody&&(i.add(function(){I(y)}),I(y)),i.add(function(){V(),U()}),u(function(){U(),z.removeClass("_hidden"),y.addClass("_ready")}),g.$on("$destroy",function(){Z(),tt(),ot(),et(),it(),rt(),lt(),nt(),pt(),at(),dt(),ct(),ut(),i.remove(),f.off(C.tooltipShowTrigger+" "+C.tooltipHideTrigger)})})};return{restrict:"A",transclude:"element",priority:1,terminal:!0,link:v}}];t.module("720kb.tooltips",[]).provider(e+"Conf",u).directive(e,m)}(angular,window);
//# sourceMappingURL=angular-tooltips.js.map
